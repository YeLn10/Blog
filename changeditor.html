<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2048 游戏</title>
    <link rel="stylesheet" href="css\general.css" />
    <link rel="stylesheet" href="css\editor.css" />
    <link rel="stylesheet" href="node_modules\editor.md\css\editormd.min.css" />
</head>

<body>
    <div class="nav">
        <img src="img/nav_icon.avif" class="avtar" alt="">
        <div id="photo">Yeln</div>
        <div id="home">主页</div>
        <div id="list"><a href="list.html">文章</a></div>
        <div id="about">关于</div>
    </div>
    <br><br><br>
    <div id="completeEditor">
        <input type="text" placeholder="文章标题" id="titleEditor" value="电设经验">
        <button id="save">保存文章</button>
        <div id="editor" style="border-radius:10px;">
            <!-- Tips: Editor.md can auto append a `<textarea>` tag -->
            <textarea style="display:block;">
当出现status 2 error时，一般是硬件问题，此时要按住boot+ret+松开boot，去重设esp32板子。

如果终端serial输出不了东西，检查tool里面有没有enable一些东西。

serial1一般是板子读入输出，所以serial1.print是往板子里输东西。此时另一台电脑再serial1.read()会读入这个消息。

serial是终端读入输出。

LOW和HIGH哪个是激活要看板子，我们这个是LOW激活。

防抖
````cpp
int LED=10,btn=9,flag=0,led=HIGH;
void setup() {
  // put your setup code here, to run once:
  pinMode(btn,INPUT);
  pinMode(LED,OUTPUT);
  digitalWrite(LED,led);
}

void loop() {
  // put your main code here, to run repeatedly:
  int state=digitalRead(btn);
  if(state==LOW){
    delay(50);
    state=digitalRead(btn);
    if(state==LOW&&flag==0){
      led=!led;flag=1;
      digitalWrite(LED,led);
    }
  }
  else flag=0;
}

````


三色LED及切换状态
```cpp
int red=10,blue=3,green=2;
int btn=9,btn2=20;
int st,ed,T,d;
int flag=0,flag2=0,tms=0;
void setup() {
  // put your setup code here, to run once:
  pinMode(btn,INPUT);
  pinMode(btn2,INPUT);
  pinMode(red,OUTPUT);
  pinMode(blue,OUTPUT);
  pinMode(green,OUTPUT);
  digitalWrite(red,HIGH);
  digitalWrite(blue,HIGH);
  digitalWrite(green,HIGH);
  st=millis();
  T=6000,d=1000;
}

void loop() {
  // put your main code here, to run repeatedly:
  int state=digitalRead(btn);
  if(state==LOW){
    delay(50);
    state=digitalRead(btn);
    if(state==LOW&&flag==0){
      flag=1;
      digitalWrite(red,HIGH);
      digitalWrite(blue,HIGH);
      digitalWrite(green,HIGH);
      if(T==6000) T=12000,d=2000;
      else T=6000,d=1000;
    }
  }
  else flag=0;

  int state2=digitalRead(btn2);
  if(state2==LOW){
    delay(50);
    state2=digitalRead(btn2);
    if(state2==LOW&&flag2==0){
      flag2=1;
      digitalWrite(red,HIGH);
      digitalWrite(blue,HIGH);
      digitalWrite(green,HIGH);
      if(tms==0) tms=1;
      else if(tms==1) tms=2;
      else if(tms==2) tms=3;
      else if(tms==3) tms=4;
      else tms=0;
    }
  }
  else flag2=0;

  if(tms==0)
  {
    ed=millis();
    if((ed-st)%T==0) digitalWrite(red,LOW);
    else if((ed-st)%T==d) digitalWrite(red,HIGH);
    else if((ed-st)%T==2*d) digitalWrite(green,LOW);
    else if((ed-st)%T==3*d) digitalWrite(green,HIGH);
    else if((ed-st)%T==4*d) digitalWrite(blue,LOW);
    else if((ed-st)%T==5*d) digitalWrite(blue,HIGH);
  }
  else if(tms==1)
  {
    ed=millis();
    if((ed-st)%2000==0) digitalWrite(red,LOW);
    else if((ed-st)%2000==1000) digitalWrite(red,HIGH);
  }
  else if(tms==2)
  {
    ed=millis();
    if((ed-st)%2000==0) digitalWrite(green,LOW);
    else if((ed-st)%2000==1000) digitalWrite(green,HIGH);
  }
  else if(tms==3)
  {
    ed=millis();
    if((ed-st)%2000==0) digitalWrite(blue,LOW);
    else if((ed-st)%2000==1000) digitalWrite(blue,HIGH);
  }
  else 
  {
    ed=millis();
    if((ed-st)%2000==0)
    {
      digitalWrite(blue,LOW);
      digitalWrite(red,LOW);
      digitalWrite(green,LOW);
    }
    else if((ed-st)%2000==1000)
    {
      digitalWrite(blue,HIGH);
      digitalWrite(red,HIGH);
      digitalWrite(green,HIGH);
    }
  }
}

```

数字控制LED闪烁
```cpp
char rec=0;
void setup() {
  // put your setup code here, to run once:
  Serial.begin(9600);
  pinMode(5,OUTPUT);
  digitalWrite(5,HIGH);
}
void loop() {
  // put your main code here, to run repeatedly:
  if(Serial.available()>0) {
    char rec=Serial.read();
    if(rec>='1'&&rec<='9') {
      int bli=rec-'0';
      for(int i=1;i<=bli;i++) {
        digitalWrite(5,LOW);
        delay(500);
        digitalWrite(5,HIGH);
        delay(500);
      }
    }
    else {
      Serial.println("Error:Please enter a number between 1 and 9!");
    }
  }
}

```

传输数据
```cpp
String comdata="";
String neddata="";
void setup() {
  // put your setup code here, to run once:
  Serial.begin(9600);
  Serial1.begin(9600,SERIAL_8N1,20,21);
}

void loop() {
  // put your main code here, to run repeatedly:
  while(Serial.available()>0){
    neddata+=char(Serial.read());
  }
  if(neddata.length()>0)
  {
    Serial1.print(neddata);
    neddata.remove(0);
  }
  while(Serial1.available()>0)
    comdata+=char(Serial1.read());
  if(comdata.length()>0)
  {
    Serial.print(comdata);
    comdata.remove(0);
  }
  delay(200);
}

```</textarea>
        </div>
    </div>
    
    <span id="edit_index">20250402154326</span>
<script src="node_modules/jquery/dist/jquery.min.js"></script>
    <script src="node_modules/editor.md/editormd.js"></script>
    <!-- 这两个要手动导入！ -->
    <script>
        $(function () {
            var editor = editormd("editor", {
                width: "90%",
                height: 640,
                saveHTMLToTextarea: true,
                highlight: true,
                path: "node_modules/editor.md/lib/",
                tex: true,
                toolbar: true
            });
            document.getElementById("save").addEventListener('click', async (e) => {
                e.preventDefault();

                const realtimeMarkdown = editor.getMarkdown();
                const realtimeHTML = editor.getHTML();
                const title=document.getElementById("titleEditor").value;
                const Time=document.getElementById("edit_index").innerHTML;
                // console.log(realtimeHTML);
                // console.log(title);
                const response = await fetch('http://localhost:5500/changeblog', {//liveserver默认端口（当然可以改）
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ realtimeHTML, realtimeMarkdown,title,Time })
                    // json格式要对!
                });
                window.location.href = '../list.html';
            });
        });
    </script>
</body>

</html>